!function($){var items=new Array,errors=new Array,onComplete=function(){},current=0,jpreOptions={preMainSection:"#main-preloader",prePerText:".preloader-percentage-text",preBar:".preloader-bar",showPercentage:!0,debugMode:!1,splashFunction:function(){}},getImages=function(element){$(element).find("*:not(script)").each((function(){var url="";if(-1==$(this).css("background-image").indexOf("none")){if(-1!=(url=$(this).css("background-image")).indexOf("url")){var temp=url.match(/url\((.*?)\)/);url=temp[1].replace(/\"/g,"")}}else"img"==$(this).get(0).nodeName.toLowerCase()&&void 0!==$(this).attr("src")&&(url=$(this).attr("src"));url.length>0&&items.push(url)}))},preloading=function(){for(var i=0;i<items.length;i++)loadImg(items[i])},loadImg=function(url){var imgLoad=new Image;$(imgLoad).load((function(){completeLoading()})).error((function(){errors.push($(this).attr("src")),completeLoading()})).attr("src",url)},completeLoading=function(){current++;var per=Math.round(current/items.length*100);if($(jBar).stop().animate({width:per+"%"},500,"linear"),jpreOptions.showPercentage&&$(jPer).text(per),current>=items.length){if(current=items.length,jpreOptions.debugMode)var error=debug();loadComplete()}},loadComplete=function(){$(jBar).stop().animate({width:"100%"},500,"linear",(function(){$(jOverlay).fadeOut(800,(function(){onComplete()}))}))},debug=function(){if(errors.length>0){var str="ERROR - IMAGE FILES MISSING!!!\n\r";str+=errors.length+" image files cound not be found. \n\r",str+="Please check your image paths and filenames:\n\r";for(var i=0;i<errors.length;i++)str+="- "+errors[i]+"\n\r";return!0}return!1},createContainer=function(tar){jOverlay=$(jpreOptions.preMainSection),jBar=jOverlay.find(jpreOptions.preBar),jPer=jOverlay.find(jpreOptions.prePerText)};$.fn.jpreLoader=function(options,callback){return options&&$.extend(jpreOptions,options),"function"==typeof callback&&(onComplete=callback),createContainer(this),getImages(this),preloading(),this}}(jQuery);